<script>
    function toggleMenu() {
        document.getElementById('mainNav').classList.toggle('active');
    }

    function changeLanguage(lang) {
        document.querySelectorAll('.lang-btn').forEach(btn => {
            btn.classList.toggle('active', btn.getAttribute('data-lang') === lang);
        });

        document.querySelectorAll('[data-nl]').forEach(el => {
            const text = el.getAttribute('data-' + lang);
            if (text !== null) {
                el.textContent = text;
            }
        });

        document.querySelectorAll('.lang-content').forEach(el => {
            el.classList.remove('active');
        });
        document.querySelectorAll('.lang-content.' + lang).forEach(el => {
            el.classList.add('active');
        });
    }

    function openModal(id) {
        document.getElementById(id).style.display = 'block';
    }

    function closeModal(id) {
        document.getElementById(id).style.display = 'none';
    }

    // Algemene formatter: hele getallen zonder decimalen, anders max X decimalen
    function formatNumber(value, decimals) {
        if (Number.isInteger(value)) {
            return value.toString();
        }
        return parseFloat(value.toFixed(decimals)).toString();
    }

    /* Lengte conversie – basis: meter */
    function convertLength() {
        const value = parseFloat(document.getElementById('lengthValue').value);
        const from = document.getElementById('lengthFromUnit').value;
        const to = document.getElementById('lengthToUnit').value;

        if (isNaN(value)) {
            alert('Vul een geldige waarde in.');
            return;
        }

        const toMeters = {
            mm: 0.001,
            cm: 0.01,
            m: 1,
            km: 1000,
            in: 0.0254,
            ft: 0.3048,
            yd: 0.9144,
            mi: 1609.344
        };

        const meters = value * toMeters[from];
        const result = meters / toMeters[to];

        document.getElementById('lengthResult').value = formatNumber(result, 4);
    }

    /* Gewicht conversie – basis: kilogram */
    function convertWeight() {
        const value = parseFloat(document.getElementById('weightValue').value);
        const from = document.getElementById('weightFromUnit').value;
        const to = document.getElementById('weightToUnit').value;

        if (isNaN(value)) {
            alert('Vul een geldige waarde in.');
            return;
        }

        const toKg = {
            mg: 0.000001,
            g: 0.001,
            kg: 1,
            t: 1000,
            oz: 0.028349523125,
            lb: 0.45359237,
            st: 6.35029318
        };

        const kg = value * toKg[from];
        const result = kg / toKg[to];

        document.getElementById('weightResult').value = formatNumber(result, 4);
    }

    function calculateArea() {
        const length = parseFloat(document.getElementById('areaLength').value);
        const width = parseFloat(document.getElementById('areaWidth').value);
        if (isNaN(length) || isNaN(width)) {
            alert('Vul geldige waarden in.');
            return;
        }

        const area = length * width;
        const formatted = formatNumber(area, 2);

        const resultDiv = document.getElementById('areaResult');
        resultDiv.textContent = `Oppervlakte: ${formatted} m²`;
        resultDiv.style.display = 'block';
    }

    function calculatePercent() {
        const base = parseFloat(document.getElementById('percentBase').value);
        const percent = parseFloat(document.getElementById('percentValue').value);
        if (isNaN(base) || isNaN(percent)) {
            alert('Vul geldige waarden in.');
            return;
        }

        const value = (base * percent) / 100;
        const formatted = formatNumber(value, 2);

        const resultDiv = document.getElementById('percentResult');
        resultDiv.textContent = `${percent}% van ${base} = ${formatted}`;
        resultDiv.style.display = 'block';
    }

    document.querySelectorAll('nav a[href^="#"]').forEach(link => {
        link.addEventListener('click', function(e) {
            e.preventDefault();
            const targetId = this.getAttribute('href').substring(1);
            const targetElement = document.getElementById(targetId);
            if (targetElement) {
                targetElement.scrollIntoView({
                    behavior: 'smooth',
                    block: 'start'
                });
                document.getElementById('mainNav').classList.remove('active');
            }
        });
    });

    document.addEventListener('DOMContentLoaded', function() {
        changeLanguage('nl');
    });
</script>
